# 手動測試指南

## 瀏覽器測試

### 1. 啟動服務

```bash
python app.py
```

確認服務運行在 `http://localhost:5000`

### 2. 訪問測試頁面

在瀏覽器中打開以下網址：

**API 測試頁面（推薦）：**
```
http://localhost:5000/test
```

這個頁面提供了完整的 API 測試功能，可以在瀏覽器中直接測試所有功能。

### 3. 測試步驟

#### 步驟 1：員工登入測試

1. 在「員工登入測試」區域
2. 輸入員工編號：`93800`
3. 輸入密碼：`1234`
4. 點擊「員工登入」按鈕
5. 查看結果，應該顯示登入成功
6. 右上角的狀態應該變為「員工已登入」

#### 步驟 2：查詢今日訂單

1. 點擊「查詢今日訂單」按鈕
2. 查看返回的 JSON 數據
3. 確認包含日期、午餐、晚餐等信息

#### 步驟 3：創建訂單

1. 選擇餐別（午餐/晚餐）
2. 選擇葷素（葷食/素食）
3. 選擇飯量（全飯/半飯）
4. 點擊「創建訂單」按鈕
5. 查看結果，應該顯示創建成功
6. 自動刷新今日訂單，確認訂單已創建

**注意：**
- 如果當前時間已過截止時間（午餐 08:30，晚餐 16:00），訂單創建會失敗
- 這是預期的行為

#### 步驟 4：取消訂單

1. 選擇要取消的餐別（午餐/晚餐）
2. 點擊「取消訂單」按鈕
3. 確認取消操作
4. 查看結果，應該顯示取消成功
5. 自動刷新今日訂單，確認訂單已取消

#### 步驟 5：管理員登入測試

1. 先登出員工帳號（點擊「登出」）
2. 在「管理員登入測試」區域
3. 輸入帳號：`admin`
4. 輸入密碼：`1234`
5. 點擊「管理員登入」按鈕
6. 查看結果，應該顯示登入成功
7. 右上角的狀態應該變為「管理員已登入」

#### 步驟 6：查詢部門列表

1. 點擊「查詢部門」按鈕
2. 查看返回的部門列表
3. 確認包含預設的部門數據

### 4. 其他測試頁面

#### 員工訂餐頁面
```
http://localhost:5000/employee
```
注意：此頁面目前使用 localStorage，需要修改以連接 API

#### 管理員登入頁面
```
http://localhost:5000/admin/login
```
注意：此頁面目前使用 localStorage，需要修改以連接 API

#### 管理員後台頁面
```
http://localhost:5000/admin
```
注意：此頁面目前使用 localStorage，需要修改以連接 API

---

## 使用 Postman 測試（進階）

### 1. 設置基礎 URL
```
http://localhost:5000/api
```

### 2. 員工登入

**請求：**
```
POST http://localhost:5000/api/employee/login
Content-Type: application/json

{
  "emp_id": "93800",
  "password": "1234"
}
```

**預期響應：**
```json
{
  "success": true,
  "message": "登入成功",
  "employee": {
    "EmpID": "93800",
    "EmpName": "林淑鈺",
    "DeptCode": "A10"
  }
}
```

### 3. 查詢今日訂單

**請求：**
```
GET http://localhost:5000/api/employee/today-orders
```

**預期響應：**
```json
{
  "success": true,
  "data": {
    "date": "2024-01-15",
    "lunch": null,
    "dinner": null,
    "lunch_cutoff": false,
    "dinner_cutoff": false
  }
}
```

### 4. 創建訂單

**請求：**
```
POST http://localhost:5000/api/employee/order
Content-Type: application/json

{
  "meal_type": "LUNCH",
  "diet_type": "MEAT",
  "rice_portion": "FULL"
}
```

### 5. 管理員登入

**請求：**
```
POST http://localhost:5000/api/admin/login
Content-Type: application/json

{
  "account": "admin",
  "password": "1234"
}
```

---

## 測試檢查清單

使用測試頁面 (`http://localhost:5000/test`) 進行以下測試：

### 基礎功能
- [ ] 訪問測試頁面成功
- [ ] Session 狀態顯示正確
- [ ] 員工登入成功
- [ ] 管理員登入成功

### 員工功能
- [ ] 查詢今日訂單
- [ ] 創建訂單（在截止時間前）
- [ ] 取消訂單（在截止時間前）
- [ ] 登出功能

### 管理員功能
- [ ] 查詢部門列表
- [ ] 查詢員工列表（需要手動在 Postman 測試）
- [ ] 查詢訂單（需要手動在 Postman 測試）

### 錯誤處理
- [ ] 錯誤密碼登入失敗
- [ ] 未登入訪問受保護端點
- [ ] 截止時間後無法訂購

---

## 常見問題

### Q: 為什麼登入後狀態沒有更新？
A: 確保瀏覽器允許 cookies，Flask 使用 session cookie 來管理登入狀態。

### Q: 為什麼創建訂單失敗？
A: 檢查當前時間是否已過截止時間（午餐 08:30，晚餐 16:00）。

### Q: 如何在瀏覽器開發者工具中查看 API 請求？
A: 打開瀏覽器開發者工具（F12），切換到「Network」標籤，然後執行操作即可看到所有 API 請求。

### Q: 如何清除 Session？
A: 點擊「登出」按鈕，或關閉瀏覽器標籤頁。

---

## 測試數據

### 預設員工帳號
- 員工編號：`93800`，密碼：`1234`（林淑鈺）
- 員工編號：`28109`，密碼：`1234`（詹金璋）
- 員工編號：`2400305`，密碼：`1234`（王瀚章）

### 預設管理員帳號
- 帳號：`admin`
- 密碼：`1234`

---

## 下一步

完成手動測試後：

1. 記錄所有測試結果
2. 記錄發現的問題
3. 驗證所有功能正常運作
4. 準備部署或進一步開發

